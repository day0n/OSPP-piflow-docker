(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f2dc3c8"],{1276:function(t,e,a){"use strict";var n=a("d784"),i=a("44e7"),o=a("825a"),s=a("1d80"),r=a("4840"),l=a("8aa5"),c=a("50c4"),d=a("14c3"),u=a("9263"),p=a("d039"),h=[].push,m=Math.min,f=4294967295,g=!p((function(){return!RegExp(f,"y")}));n("split",2,(function(t,e,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var n=String(s(this)),o=void 0===a?f:a>>>0;if(0===o)return[];if(void 0===t)return[n];if(!i(t))return e.call(n,t,o);var r,l,c,d=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,g=new RegExp(t.source,p+"g");while(r=u.call(g,n)){if(l=g.lastIndex,l>m&&(d.push(n.slice(m,r.index)),r.length>1&&r.index<n.length&&h.apply(d,r.slice(1)),c=r[0].length,m=l,d.length>=o))break;g.lastIndex===r.index&&g.lastIndex++}return m===n.length?!c&&g.test("")||d.push(""):d.push(n.slice(m)),d.length>o?d.slice(0,o):d}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var i=s(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,i,a):n.call(String(i),e,a)},function(t,i){var s=a(n,t,this,i,n!==e);if(s.done)return s.value;var u=o(t),p=String(this),h=r(u,RegExp),$=u.unicode,y=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(g?"y":"g"),T=new h(g?u:"^(?:"+u.source+")",y),v=void 0===i?f:i>>>0;if(0===v)return[];if(0===p.length)return null===d(T,p)?[p]:[];var b=0,_=0,x=[];while(_<p.length){T.lastIndex=g?_:0;var S,w=d(T,g?p:p.slice(_));if(null===w||(S=m(c(T.lastIndex+(g?0:_)),p.length))===b)_=l(p,_,$);else{if(x.push(p.slice(b,_)),x.length===v)return x;for(var V=1;V<=w.length-1;V++)if(x.push(w[V]),x.length===v)return x;_=b=S}}return x.push(p.slice(b)),x}]}),!g)},"2aae":function(t,e,a){},"44e7":function(t,e,a){var n=a("861d"),i=a("c6b6"),o=a("b622"),s=o("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==i(t))}},"6f7d":function(t,e,a){"use strict";var n=a("2aae"),i=a.n(n);i.a},8418:function(t,e,a){"use strict";var n=a("c04e"),i=a("9bf2"),o=a("5c6c");t.exports=function(t,e,a){var s=n(e);s in t?i.f(t,s,o(0,a)):t[s]=a}},"99af":function(t,e,a){"use strict";var n=a("23e7"),i=a("d039"),o=a("e8b5"),s=a("861d"),r=a("7b0b"),l=a("50c4"),c=a("8418"),d=a("65f0"),u=a("1dde"),p=a("b622"),h=a("2d00"),m=p("isConcatSpreadable"),f=9007199254740991,g="Maximum allowed index exceeded",$=h>=51||!i((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),y=u("concat"),T=function(t){if(!s(t))return!1;var e=t[m];return void 0!==e?!!e:o(t)},v=!$||!y;n({target:"Array",proto:!0,forced:v},{concat:function(t){var e,a,n,i,o,s=r(this),u=d(s,0),p=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?s:arguments[e],T(o)){if(i=l(o.length),p+i>f)throw TypeError(g);for(a=0;a<i;a++,p++)a in o&&c(u,p,o[a])}else{if(p>=f)throw TypeError(g);c(u,p++,o)}return u.length=p,u}})},b0c0:function(t,e,a){var n=a("83ab"),i=a("9bf2").f,o=Function.prototype,s=o.toString,r=/^\s*function ([^ (]*)/,l="name";n&&!(l in o)&&i(o,l,{configurable:!0,get:function(){try{return s.call(this).match(r)[1]}catch(t){return""}}})},ca81:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"navbar"},[a("div",{staticClass:"left"},[a("span",[t._v(t._s(t.$t("sidebar.schedule")))])]),a("div",{staticClass:"right"},[a("span",{staticClass:"button-warp",on:{click:t.handleModalSwitch}},[a("Icon",{attrs:{type:"md-add"}})],1)])]),a("div",{staticClass:"input"},[a("Input",{staticStyle:{width:"300px"},attrs:{suffix:"ios-search",placeholder:t.$t("modal.placeholder")},model:{value:t.param,callback:function(e){t.param=e},expression:"param"}})],1),a("Table",{attrs:{border:"",columns:t.columns,data:t.tableData},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.row;return[a("Tooltip",{attrs:{content:"Enter",placement:"top-start"}},[a("span",{staticClass:"button-warp",on:{click:function(e){return t.handleButtonSelect(n,1)}}},[a("Icon",{attrs:{type:"ios-redo"}})],1)]),a("Tooltip",{attrs:{content:"Edit",placement:"top-start"}},[a("span",{staticClass:"button-warp",on:{click:function(e){return t.handleButtonSelect(n,2)}}},[a("Icon",{attrs:{type:"ios-create-outline"}})],1)]),"RUNNING"===n.status.text?a("Tooltip",{attrs:{content:"Stop",placement:"top-start"}},[a("span",{staticClass:"button-warp",on:{click:function(e){return t.handleButtonSelect(n,3)}}},[a("Icon",{attrs:{type:"ios-square",size:"12"}})],1)]):a("Tooltip",{attrs:{content:"Run",placement:"top-start"}},[a("span",{staticClass:"button-warp",on:{click:function(e){return t.handleButtonSelect(n,3)}}},[a("Icon",{attrs:{type:"ios-play"}})],1)]),a("Tooltip",{attrs:{content:"Delete",placement:"top-start"}},[a("span",{staticClass:"button-warp",on:{click:function(e){return t.handleButtonSelect(n,4)}}},[a("Icon",{attrs:{type:"ios-trash"}})],1)])]}}])}),a("div",{staticClass:"page"},[a("Page",{attrs:{"prev-text":t.$t("page.prev_text"),"next-text":t.$t("page.next_text"),"show-elevator":"","show-total":!0,total:t.total,"show-sizer":""},on:{"on-change":t.onPageChange,"on-page-size-change":t.onPageSizeChange}})],1),a("Modal",{attrs:{title:t.id?t.$t("schedule_columns.update_title"):t.$t("schedule_columns.create_title"),"ok-text":t.$t("modal.ok_text"),"cancel-text":t.$t("modal.cancel_text")},on:{"on-ok":t.handleSaveUpdateData},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[a("div",{staticClass:"modal-warp Schedule"},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:t.$t("schedule_columns.scheduleType")}},[a("Select",{staticStyle:{width:"340px"},attrs:{placeholder:"type"},model:{value:t.formValidateType.type,callback:function(e){t.$set(t.formValidateType,"type",e)},expression:"formValidateType.type"}},t._l(t.formValidateType.typeList,(function(e){return a("Option",{key:e.name,attrs:{value:e.name}},[t._v(" "+t._s(e.name))])})),1)],1),a("FormItem",{attrs:{label:t.$t("schedule_columns.cron"),prop:"cron"}},[a("Input",{staticStyle:{width:"340px"},attrs:{"show-word-limit":"",maxlength:"100",placeholder:t.$t("modal.placeholder")},model:{value:t.formValidate.cron,callback:function(e){t.$set(t.formValidate,"cron",e)},expression:"formValidate.cron"}})],1),a("FormItem",{staticClass:"form-content",attrs:{label:t.$t("schedule_columns.startDate")}},[a("Row",[a("Col",{attrs:{span:"10"}},[a("FormItem",{attrs:{prop:"date"}},[a("DatePicker",{attrs:{type:"date",placeholder:"Select date",value:t.formValidate.startDate},on:{"on-change":t.handleChangeStartDate}})],1)],1),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[t._v("-")]),a("Col",{attrs:{span:"10"}},[a("FormItem",{attrs:{prop:"time"}},[a("TimePicker",{attrs:{type:"time",placeholder:"Select time"},model:{value:t.formValidate.startTime,callback:function(e){t.$set(t.formValidate,"startTime",e)},expression:"formValidate.startTime"}})],1)],1)],1)],1),a("FormItem",{staticClass:"form-content",attrs:{label:t.$t("schedule_columns.endDate")}},[a("Row",[a("Col",{attrs:{span:"10"}},[a("FormItem",{attrs:{prop:"date"}},[a("DatePicker",{attrs:{type:"date",placeholder:"Select date",value:t.formValidate.endDate},on:{"on-change":t.handleChangeEndDate}})],1)],1),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[t._v("-")]),a("Col",{attrs:{span:"10"}},[a("FormItem",{attrs:{prop:"time"}},[a("TimePicker",{attrs:{type:"time",placeholder:"Select time"},model:{value:t.formValidate.endTime,callback:function(e){t.$set(t.formValidate,"endTime",e)},expression:"formValidate.endTime"}})],1)],1)],1)],1),a("FormItem",{attrs:{label:t.$t("schedule_columns.flowIsGroup"),prop:"suType"}},[a("Select",{staticStyle:{width:"340px"},model:{value:t.formValidate.suType,callback:function(e){t.$set(t.formValidate,"suType",e)},expression:"formValidate.suType"}},t._l(t.subTypeList,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name))])})),1)],1)],1)],1)])],1)},i=[],o=(a("99af"),a("b0c0"),a("ac1f"),a("1276"),{name:"schedule",components:{},data:function(){return{isOpen:!1,page:1,limit:10,total:0,tableData:[],param:"",row:null,id:"",name:"",subTypeList:[],formValidateType:{type:"FLOW",typeList:[{name:"FLOW"},{name:"FLOW_GROUP"}]},formValidate:{cron:"",startDate:"",startTime:"",endDate:"",endTime:"",suType:""},ruleValidate:{cron:[{required:!0,message:"The cron cannot be empty",trigger:"blur"}],suType:[{required:!0,message:"Please select the flow / Group",trigger:"change"}]}}},watch:{isOpen:function(t){t||this.handleReset()},param:function(t){this.page=1,this.limit=10,this.getTableData()},formValidateType:{handler:function(t){this.handleGetTemplateData(t.type)},deep:!0,immediate:!0}},computed:{columns:function(){return[{title:this.$t("schedule_columns.name"),key:"scheduleRunTemplateName",sortable:!0},{title:this.$t("schedule_columns.type"),key:"type",sortable:!0},{title:this.$t("schedule_columns.cron"),key:"cronExpression",sortable:!0},{title:this.$t("schedule_columns.StartTime"),key:"planStartTimeStr",sortable:!0},{title:this.$t("schedule_columns.EndTime"),key:"planEndTimeStr",sortable:!0},{title:this.$t("schedule_columns.status"),key:"status",sortable:!0,render:function(t,e){return t("span",e.row.status.text)}},{title:this.$t("schedule_columns.action"),slot:"action",width:230,align:"center"}]}},created:function(){this.getTableData()},methods:{handleReset:function(){this.page=1,this.limit=10,this.id="",this.formValidateType.type="FLOW",this.row=null,this.name="",this.formValidate={},this.formValidate.suType=" "},handleButtonSelect:function(t,e){switch(e){case 1:var a="/drawingBoard/page/flow/mxGraph/index.html?load="+t.scheduleRunTemplateId+"&BreadcrumbSchedule";"FLOW_GROUP"===t.type&&(a="/drawingBoard/page/flowGroup/mxGraph/index.html?drawingBoardType=GROUP&load=".concat(t.scheduleRunTemplateId)+"&BreadcrumbSchedule"),this.$event.emit("crumb",[{name:"flow",path:"/schedule"},{name:"drawingBoard",path:"/drawingBoard"}]),this.$router.push({path:"/drawingBoard",query:{src:a}});break;case 2:this.getRowData(t);break;case 3:this.handleStop(t);break;case 4:this.handleDeleteRow(t);break;default:break}},handleSaveUpdateData:function(){var t=this,e={type:this.formValidateType.type,scheduleRunTemplateId:this.formValidate.suType,cronExpression:this.formValidate.cron,planStartTimeStr:this.formValidate.startDate+" "+this.formValidate.startTime,planEndTimeStr:this.formValidate.endDate+" "+this.formValidate.endTime};this.id?(e.id=this.id,this.$axios.post("/schedule/updateSchedule",this.$qs.stringify(e)).then((function(e){200===e.data.code?(t.$Modal.success({title:t.$t("tip.title"),content:"".concat(t.name," ")+t.$t("tip.update_success_content")}),t.isOpen=!1,t.handleReset(),t.getTableData()):t.$Message.error({content:"".concat(t.name," ")+t.$t("tip.update_fail_content"),duration:3})})).catch((function(e){t.$Message.error({content:t.$t("tip.fault_content"),duration:3})}))):this.$axios.post("/schedule/addSchedule",this.$qs.stringify(e)).then((function(e){200===e.data.code?(t.$Modal.success({title:t.$t("tip.title"),content:"".concat(t.name," ")+t.$t("tip.add_success_content")}),t.isOpen=!1,t.handleReset(),t.getTableData()):t.$Message.error({content:"".concat(t.name," ")+t.$t("tip.add_fail_content"),duration:3})})).catch((function(e){t.$Message.error({content:t.$t("tip.fault_content"),duration:3})}))},handleGetTemplateData:function(t){var e=this,a={page:1,limit:1e4};"FLOW"===t?this.$axios.get("/flow/getFlowListPage",{params:a}).then((function(t){200===t.data.code?e.subTypeList=t.data.data:e.$Message.error({content:e.$t("tip.request_fail_content"),duration:3})})).catch((function(t){e.$Message.error({content:e.$t("tip.fault_content"),duration:3})})):"FLOW_GROUP"===t&&this.$axios.get("/flowGroup/getFlowGroupListPage",{params:a}).then((function(t){200===t.data.code?e.subTypeList=t.data.data:e.$Message.error({content:e.$t("tip.request_fail_content"),duration:3})})).catch((function(t){e.$Message.error({content:e.$t("tip.fault_content"),duration:3})}))},handleStop:function(t){var e=this,a={scheduleId:t.id},n="/schedule/stopSchedule",i=!1;"STOP"!==t.status.text&&"INIT"!==t.status.text||(n="/schedule/startSchedule",i=!0),this.$event.emit("loading",!0),this.$axios.post(n,this.$qs.stringify(a)).then((function(a){200===a.data.code?(e.$event.emit("loading",!1),e.$Modal.success({title:e.$t("tip.title"),content:i?"".concat(t.cronExpression," ")+e.$t("tip.run_success_content"):"".concat(t.cronExpression," ")+e.$t("tip.stop_success_content")}),e.getTableData()):(e.$event.emit("loading",!1),e.$Message.error({content:i?"".concat(t.cronExpression," ")+e.$t("tip.run_fail_content"):"".concat(t.cronExpression," ")+e.$t("tip.stop_fail_content"),duration:3}))})).catch((function(t){e.$event.emit("loading",!1),e.$Message.error({content:e.$t("tip.fault_content"),duration:3})}))},getRowData:function(t){var e=this;this.$event.emit("loading",!0),this.$axios.get("/schedule/getScheduleById",{params:{scheduleId:t.id}}).then((function(t){if(200===t.data.code){var a=t.data.scheduleVo;e.id=a.id,e.formValidateType.type=a.type,e.formValidate.suType=a.scheduleRunTemplateId,e.formValidate.cron=a.cronExpression,a.planStartTimeStr&&(a.planStartTimeStr=a.planStartTimeStr.split(" "),e.formValidate.startDate=a.planStartTimeStr[0],e.formValidate.startTime=a.planStartTimeStr[1]),a.planEndTimeStr&&(a.planEndTimeStr=a.planEndTimeStr.split(" "),e.formValidate.endDate=a.planEndTimeStr[0],e.formValidate.endTime=a.planEndTimeStr[1]),e.$event.emit("loading",!1),e.isOpen=!0}else e.$event.emit("loading",!1),e.$Message.error({content:e.$t("tip.data_fail_content"),duration:3})})).catch((function(t){e.$event.emit("loading",!1),e.$Message.error({content:e.$t("tip.fault_content"),duration:3})}))},handleDeleteRow:function(t){var e=this;"RUNNING"===t.status.text?this.$Modal.warning({title:this.$t("tip.title"),content:"".concat(t.cronExpression," ")+"In operation, temporarily unable to delete !"}):this.$Modal.confirm({title:this.$t("tip.title"),okText:this.$t("modal.confirm"),cancelText:this.$t("modal.cancel_text"),content:"".concat(this.$t("modal.delete_content")," ").concat(t.cronExpression,"?"),onOk:function(){var a={scheduleId:t.id};e.$axios.post("/schedule/delSchedule",e.$qs.stringify(a)).then((function(a){200===a.data.code?(e.$Modal.success({title:e.$t("tip.title"),content:"".concat(t.cronExpression," ")+e.$t("tip.delete_success_content")}),e.handleReset(),e.getTableData()):e.$Message.error({content:e.$t("tip.delete_fail_content"),duration:3})})).catch((function(t){e.$Message.error({content:e.$t("tip.fault_content"),duration:3})}))}})},getTableData:function(){var t=this,e={page:this.page,limit:this.limit};this.param&&(e.param=this.param),this.$axios.get("/schedule/getScheduleVoListPage",{params:e}).then((function(e){200===e.data.code?(t.tableData=e.data.data,t.total=e.data.count):t.$Message.error({content:t.$t("tip.request_fail_content"),duration:3})})).catch((function(e){t.$Message.error({content:t.$t("tip.fault_content"),duration:3})}))},onPageChange:function(t){this.page=t,this.getTableData()},onPageSizeChange:function(t){this.limit=t,this.getTableData()},handleModalSwitch:function(){this.isOpen=!this.isOpen},handleChangeStartDate:function(t){this.formValidate.startDate=t},handleChangeEndDate:function(t){this.formValidate.endDate=t}}}),s=o,r=(a("6f7d"),a("2877")),l=Object(r["a"])(s,n,i,!1,null,"28941d42",null);e["default"]=l.exports}}]);