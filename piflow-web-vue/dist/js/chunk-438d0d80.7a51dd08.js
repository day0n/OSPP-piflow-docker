(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-438d0d80"],{"121f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"navbar"},[a("div",{staticClass:"left"},[a("span",[t._v(t._s(t.$t("sidebar.template")))])]),a("div",{staticClass:"right"},[a("Upload",{staticClass:"button-warp",attrs:{action:t.$url+"/flowTemplate/uploadXmlFile","on-success":t.handleFileSuccess,"on-error":t.handleFileError,headers:t.headers,"before-upload":t.handleFileBefore,"show-upload-list":!1}},[a("Icon",{attrs:{type:"md-cloud-upload"}})],1)],1)]),a("div",{staticClass:"input"},[a("Input",{staticStyle:{width:"300px"},attrs:{suffix:"ios-search",placeholder:t.$t("modal.placeholder")},model:{value:t.param,callback:function(e){t.param=e},expression:"param"}})],1),a("Table",{attrs:{border:"",columns:t.columns,data:t.tableData},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.row;return t._l(t.promptContent,(function(e,o){return a("Tooltip",{key:o,attrs:{content:e.content,placement:"top-start"}},[a("span",{staticClass:"button-warp",on:{click:function(e){return t.handleButtonSelect(n,o+1)}}},[a("Icon",{attrs:{type:e.icon}})],1)])}))}}])}),a("div",{staticClass:"page"},[a("Page",{attrs:{"prev-text":t.$t("page.prev_text"),"next-text":t.$t("page.next_text"),"show-elevator":"","show-total":!0,total:t.total,"show-sizer":""},on:{"on-change":t.onPageChange,"on-page-size-change":t.onPageSizeChange}})],1)],1)},o=[],i=(a("99af"),a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),{name:"templates",components:{},data:function(){return{page:1,limit:10,total:0,tableData:[],headers:{Authorization:"Bearer ".concat(this.$store.state.variable.token)},param:"",promptContent:[{content:"Download",icon:"md-cloud-download"},{content:"Delete",icon:"ios-trash"}]}},watch:{param:function(t){this.page=1,this.limit=10,this.getTableData()}},computed:{columns:function(){return[{title:this.$t("template_columns.name"),key:"name",sortable:!0},{title:this.$t("template_columns.crtDttm"),key:"crtDttm"},{title:this.$t("template_columns.action"),slot:"action",width:180,align:"center"}]}},created:function(){this.getTableData()},methods:{handleReset:function(){this.page=1,this.limit=10},handleButtonSelect:function(t,e){switch(e){case 1:this.handleDownload(t);break;case 2:this.handleDeleteRow(t);break;default:break}},handleDeleteRow:function(t){var e=this;this.$Modal.confirm({title:this.$t("tip.title"),okText:this.$t("modal.confirm"),cancelText:this.$t("modal.cancel_text"),content:"".concat(this.$t("modal.delete_content")," ").concat(t.name,"?"),onOk:function(){var a={id:t.id};e.$axios.get("/flowTemplate/deleteFlowTemplate",{params:a}).then((function(a){e.$event.emit("loading",!1),200===a.data.code?(e.$Modal.success({title:e.$t("tip.title"),content:"".concat(t.name," ")+e.$t("tip.delete_success_content")}),e.handleReset(),e.getTableData()):e.$Message.error({content:e.$t("tip.delete_fail_content"),duration:3})})).catch((function(t){e.$event.emit("loading",!1),e.$Message.error({content:e.$t("tip.fault_content"),duration:3})}))}})},getTableData:function(){var t=this,e={page:this.page,limit:this.limit};this.param&&(e.param=this.param),this.$axios.get("/flowTemplate/flowTemplatePage",{params:e}).then((function(e){t.$event.emit("loading",!1),200===e.data.code?(t.tableData=e.data.data,t.total=e.data.count):t.$Message.error({content:t.$t("tip.request_fail_content"),duration:3})})).catch((function(e){t.$event.emit("loading",!1),t.$Message.error({content:t.$t("tip.fault_content"),duration:3})}))},onPageChange:function(t){this.page=t,this.getTableData()},onPageSizeChange:function(t){this.limit=t,this.getTableData()},handleDownload:function(t){var e=this;this.$axios.get("/flowTemplate/templateDownload?flowTemplateId="+t.id).then((function(a){var n=new Blob([a.data]),o=document.createElement("a"),i=window.URL.createObjectURL(n);o.href=i,o.download=t.name+".xml",o.click(),window.URL.revokeObjectURL(i),e.$Modal.success({title:e.$t("tip.title"),content:t.name+" "+e.$t("tip.download_success_content")})})).catch((function(a){e.$Message.error({content:t.name+" "+e.$t("tip.download_fail_content"),duration:3})}))},handleFileSuccess:function(t,e,a){this.$event.emit("loading",!1),200===t.code?(this.$Modal.success({title:this.$t("tip.title"),content:this.$t("tip.upload_success_content")}),this.getTableData()):this.$Message.error({content:this.$t("tip.upload_fail_content"),duration:3})},handleFileError:function(t,e,a){this.$event.emit("loading",!1),this.$Message.error({content:this.$t("tip.upload_fail_content"),duration:3})},handleFileBefore:function(){this.$event.emit("loading",!0)}}}),l=i,s=(a("97b0"),a("2877")),c=Object(s["a"])(l,n,o,!1,null,"4404aab7",null);e["default"]=c.exports},"97b0":function(t,e,a){"use strict";var n=a("f807"),o=a.n(n);o.a},f807:function(t,e,a){}}]);